<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>ìš°ë¦¬ë“¤ì˜ ì´ì•¼ê¸°</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css">

<style>
  :root{
    --bg:#0f0d0c;
    --text:#f5f5f5;
    --accent:#ff4d6d;
    --vh:1vh; /* JSì—ì„œ ì‹¤ì œ í™”ë©´ ë†’ì´ë¡œ ê°±ì‹  */
  }

  *{ box-sizing:border-box; }

  body{
    margin:0;
    font-family:"Pretendard Variable", system-ui, -apple-system, BlinkMacSystemFont;
    background:
      radial-gradient(1200px 600px at 50% 70%, rgba(255,77,109,0.16), transparent 60%),
      radial-gradient(800px 500px at 30% 20%, rgba(255,143,171,0.12), transparent 60%),
      var(--bg);
    color:var(--text);
    overflow:hidden;
    touch-action:manipulation;
  }

  /* í˜ì´ì§€: ì£¼ì†Œì°½/íˆ´ë°” í¬í•¨ vh ì˜¤ì°¨ ë°©ì§€ */
  .page{
    position:absolute;
    inset:0;
    height: calc(var(--vh) * 100);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:0;
    opacity:0;
    transform: translateY(8px) scale(0.985);
    transition: opacity .55s ease, transform .55s ease;
  }
  .page.active{
    opacity:1;
    transform: translateY(0) scale(1);
    z-index:2;
  }

  /* ì¼ë°˜ í˜ì´ì§€ ì´ë¯¸ì§€: í™”ë©´ ê½‰ */
  .page img{
    width:100%;
    height:100%;
    object-fit:contain;
    display:block;
  }

  /* ì¢Œ/ìš° í„°ì¹˜ ë„¤ë¹„ê²Œì´ì…˜ íˆíŠ¸ ì˜ì—­(ì „ì²´ í™”ë©´ ê¸°ì¤€) */
  .touch-nav{
    position:absolute;
    inset:0;
    z-index:20;
    display:grid;
    grid-template-columns: 1fr 1fr;
  }
  .touch-zone{
    background:transparent;
    -webkit-tap-highlight-color: transparent;
  }

  /* ê½ƒì */
  .petals{ position:fixed; inset:0; pointer-events:none; z-index:200; }
  .petal{
    position:absolute;
    top:-10vh;
    font-size:22px;
    filter: drop-shadow(0 8px 14px rgba(0,0,0,.25));
    animation: fall linear forwards;
    will-change: transform, opacity;
  }
  @keyframes fall{
    0%{transform:translate3d(var(--x),-10vh,0) rotate(0deg); opacity:0;}
    10%{opacity:1;}
    100%{transform:translate3d(calc(var(--x) + var(--drift)),110vh,0) rotate(var(--rot)); opacity:1;}
  }

  /* ========= ë§ˆì§€ë§‰ í˜ì´ì§€(ê·¸ë¦¼ì±… ë‚´ë¶€ ìš°ì¸¡í•˜ë‹¨ì— Yes) ========= */
  .book{
    position:relative;
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .book img{
    width:100%;
    height:100%;
    object-fit:contain;
    display:block;
  }

  /* âœ… Yes ë²„íŠ¼: ê·¸ë¦¼ì±…(ì´ë¯¸ì§€) ì•ˆìª½ ìš°ì¸¡í•˜ë‹¨(4/4ë¶„ë©´) */
  .yes-btn{
    position:absolute;
    right: 20%;
    bottom: 10%;
    padding: 14px 32px;
    font-size: 20px;
    font-weight: 900;
    border:none;
    border-radius:999px;
    background: var(--accent);
    color:white;
    box-shadow:0 16px 38px rgba(255,77,109,.38);
    z-index:30;
    cursor:pointer;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
  }
  .yes-btn.pulse{
    animation: pulse 1.5s ease-in-out infinite;
  }
  @keyframes pulse{
    0%,100%{ transform:scale(1); }
    50%{ transform:scale(1.03); }
  }

  /* ë§ˆì§€ë§‰ í˜ì´ì§€ì—ì„œëŠ” í„°ì¹˜ ë„¤ë¹„ë„ ê·¸ë¦¼ì±… ê¸°ì¤€ìœ¼ë¡œ ë®ê¸° */
  .book .touch-nav{
    position:absolute;
    inset:0;
    z-index:20;
    display:grid;
    grid-template-columns: 1fr 1fr;
  }
</style>

<script>
  // ì‹¤ì œ í™”ë©´ ë†’ì´ë¡œ vh ë³´ì • (ì£¼ì†Œì°½/íˆ´ë°” ì˜í–¥ ìµœì†Œí™”)
  function setVH(){
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
  }
  window.addEventListener('resize', setVH);
  window.addEventListener('orientationchange', () => setTimeout(setVH, 200));
  setVH();
</script>
</head>

<body>
<audio id="bgm" src="music.mp3" loop></audio>
<audio id="sfx" src="firework.mp3" preload="auto"></audio>

<!-- 1~5 í˜ì´ì§€ (ë²„íŠ¼ ì—†ìŒ, ì¢Œ/ìš° í„°ì¹˜ë¡œ ì´ë™) -->
<div class="page active">
  <img src="1.png" alt="p1">
  <div class="touch-nav">
    <div class="touch-zone" data-nav="prev" aria-label="ì´ì „"></div>
    <div class="touch-zone" data-nav="next" aria-label="ë‹¤ìŒ"></div>
  </div>
</div>

<div class="page">
  <img src="2.png" alt="p2">
  <div class="touch-nav">
    <div class="touch-zone" data-nav="prev"></div>
    <div class="touch-zone" data-nav="next"></div>
  </div>
</div>

<div class="page">
  <img src="3.png" alt="p3">
  <div class="touch-nav">
    <div class="touch-zone" data-nav="prev"></div>
    <div class="touch-zone" data-nav="next"></div>
  </div>
</div>

<div class="page">
  <img src="4.png" alt="p4">
  <div class="touch-nav">
    <div class="touch-zone" data-nav="prev"></div>
    <div class="touch-zone" data-nav="next"></div>
  </div>
</div>

<div class="page">
  <img src="5.png" alt="p5">
  <div class="touch-nav">
    <div class="touch-zone" data-nav="prev"></div>
    <div class="touch-zone" data-nav="next"></div>
  </div>
</div>

<!-- ë§ˆì§€ë§‰(6) : Yes ë²„íŠ¼ì€ ê·¸ë¦¼ì±… ì•ˆìª½ ìš°ì¸¡í•˜ë‹¨ì— í¬ê²Œ -->
<div class="page">
  <div class="book">
    <img src="6.png" alt="p6">
    <button id="yesBtn" class="yes-btn pulse" type="button">ì¢‹ì•„, ìš°ë¦¬ ê²°í˜¼í•´!â¤ï¸ğŸ’</button>

    <div class="touch-nav">
      <div class="touch-zone" data-nav="prev"></div>
      <div class="touch-zone" data-nav="next"></div>
    </div>
  </div>
</div>

<div id="petals" class="petals"></div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<script>
  const pages = document.querySelectorAll('.page');
  const petalsLayer = document.getElementById('petals');
  const bgm = document.getElementById('bgm');
  const sfx = document.getElementById('sfx');
  const yesBtn = document.getElementById('yesBtn');

  let current = 0;

  // ì²« ìƒí˜¸ì‘ìš©: BGM ì‹œì‘ + SFX ì›Œë°ì—… + ì£¼ì†Œì°½ ìˆ¨ê¹€ ì‹œë„
  function firstInteract(){
    if (!bgm.paused) return;
    bgm.play().catch(()=>{});
    try{
      sfx.play().then(()=>{
        sfx.pause();
        sfx.currentTime = 0;
      }).catch(()=>{});
    }catch(e){}
    setTimeout(() => window.scrollTo(0,1), 120);
  }
  document.body.addEventListener('pointerdown', firstInteract, { once:true });

  function showPage(i){
    pages[current].classList.remove('active');
    current = i;
    pages[current].classList.add('active');
    setTimeout(() => window.scrollTo(0,1), 80);
  }

  function nextPage(){
    if(current < pages.length - 1) showPage(current + 1);
  }
  function prevPage(){
    if(current > 0) showPage(current - 1);
  }

  // ì¢Œ/ìš° í„°ì¹˜ ë„¤ë¹„ (zone í´ë¦­ ì‹œ)
  document.addEventListener('click', (e)=>{
    const zone = e.target.closest('.touch-zone');
    if(!zone) return;

    firstInteract();

    const dir = zone.dataset.nav;
    if(dir === 'prev') prevPage();
    if(dir === 'next') nextPage();
  });

  // ê½ƒ/í­ì£½ íš¨ê³¼
  function dropFlowers(count = 44){
    const symbols = ["ğŸŒ¸","ğŸŒ·","ğŸ’","ğŸŒº","ğŸŒ¼"];
    const w = window.innerWidth;

    for(let i=0;i<count;i++){
      const el = document.createElement('span');
      el.className = 'petal';
      el.textContent = symbols[Math.floor(Math.random()*symbols.length)];

      const x = Math.floor(Math.random() * w);
      const drift = (Math.random() * 300 - 150).toFixed(0) + "px";
      const rot = (Math.random() * 720 - 360).toFixed(0) + "deg";
      const dur = (Math.random() * 2.2 + 2.8).toFixed(2) + "s";
      const delay = (Math.random() * 0.18).toFixed(2) + "s";
      const size = (Math.random() * 14 + 18).toFixed(0) + "px";

      el.style.setProperty('--x', x + "px");
      el.style.setProperty('--drift', drift);
      el.style.setProperty('--rot', rot);
      el.style.animationDuration = dur;
      el.style.animationDelay = delay;
      el.style.fontSize = size;

      petalsLayer.appendChild(el);
      el.addEventListener('animationend', ()=> el.remove());
    }
  }

  function fireworks(){
    confetti({ particleCount: 110, spread: 95, startVelocity: 52, origin: { y: 0.62 }});
    confetti({ particleCount: 70,  spread: 85, startVelocity: 46, origin: { x: 0.18, y: 0.68 }});
    confetti({ particleCount: 70,  spread: 85, startVelocity: 46, origin: { x: 0.82, y: 0.68 }});
  }

  function playSfxFresh(){
    try{
      sfx.pause();
      sfx.currentTime = 0;
      sfx.volume = 0.95;
      sfx.play();
    }catch(e){}
  }

  // Yes ë°˜ë³µ í´ë¦­: ë§¤ë²ˆ í­ì£½+ê½ƒ+íš¨ê³¼ìŒ ê°±ì‹ 
  function celebrate(e){
    e.stopPropagation(); // âœ… Yes ëˆ„ë¥¼ ë•Œ í˜ì´ì§€ ë„˜ê¹€ ë°©ì§€
    firstInteract();
    playSfxFresh();
    fireworks();
    dropFlowers(44);
  }
  yesBtn.addEventListener('click', celebrate);

  // PC í…ŒìŠ¤íŠ¸ìš©
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowRight') nextPage();
    if(e.key === 'ArrowLeft') prevPage();
  });
</script>
</body>
</html>